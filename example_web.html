<html>
  <body>
    <script src="ethlightjs.min.js"></script>
    <div id="addr"></div>
    <div id="tx"></div> 
    <div id="signedTx"></div>
    <script>
      var keystore = ethlightjs.keystore
      var seed = 'unhappy nerve cancel reject october fix vital pulse cash behind curious bicycle'
      keystore.setSeed(seed, 'mypassword')

      function newAddr() {
	  keystore.generateNewAddress('mypassword')
	  var addresses = keystore.getAddresses()
	  document.getElementById('addr').innerHTML = 'Addr: ' + addresses[addresses.length-1]
      }

      function getTx() {
	  var abi = [{"constant":false,"inputs":[{"name":"key","type":"uint256"}],"name":"register","outputs":[],"type":"function"}]
	  var txOptions = {
	      gasPrice: 10000000000000,
	      gasLimit: 3000000,
	      value: 0,
	      nonce: 1,
	      to: '6c19d6af83d0d335a006ae424a426ef4d139d827'
	  }
	  
	  var tx = ethlightjs.functionTx(abi, 'register', [123], txOptions)
	  document.getElementById('tx').innerHTML = 'TX: ' + tx
	  var addr = keystore.getAddresses()[0]
	  var signedTx = keystore.signTx(tx, 'mypassword', addr)
	  document.getElementById('signedTx').innerHTML = 'Signed TX: ' + signedTx
      }

    </script>
    <div><button onClick='newAddr()'>New addr</button></div>
    <div><button onClick='getTx()'>Show TX</button></div>

  </body>
</html>
